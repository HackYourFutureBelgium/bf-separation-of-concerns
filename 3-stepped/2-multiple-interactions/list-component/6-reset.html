<!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <head>
        
        <title>List Component</title>
        <style></style>
    </head>

    <body>
        <section id="user-interface">
            <input id="word" type="text" value="" placeholder="message"/> <br />
            <button id="push-button" type="button">push</button>
            <button id="unshift-button" type="button">unshift</button><br />
            <button id="pop-button" type="button">pop</button>
            <button id="shift-button" type="button">shift</button> <br />
            <!-- 1. write UI for resetting -->
            <button id="reset-button" type="button">reset</button>
            <hr />
            <div id="all-words"></div>
        </section>

        <script id="data">
            const state = {
                words: [],
            };
            console.log('initial words:', [...state.words]);
        </script>

        <script id="components">
            const wordsList = (array) => {
                const ul = document.createElement('ul');
                for (let string of array) {
                    const li = document.createElement('li');
                    li.innerHTML = string;
                    ul.appendChild(li);
                }
                return ul;
            };

            // removed tests for readability
            // see step 2 for component tests
        </script>

        <script id="handlers">
            const pushWordHandler = () => {
                debugger;
                // read input from DOM
                const newWord = document.getElementById('word').value;
                // update state
                state.words.push(newWord);
                // render state
                const wordsComponent = wordsList(state.words);
                // update UI
                const wordsContainer = document.getElementById('all-words');
                wordsContainer.innerHTML = '';
                wordsContainer.appendChild(wordsComponent);
                // log interaction
                console.log('push:', newWord, [...state.words]);
            };

            const unshiftWordHandler = () => {
                debugger;
                // read user input
                const newWord = document.getElementById('word').value;
                // update state
                state.words.unshift(newWord);
                // render state
                const wordsComponent = wordsList(state.words);
                // update UI
                const wordsContainer = document.getElementById('all-words');
                wordsContainer.innerHTML = '';
                wordsContainer.appendChild(wordsComponent);
                // log interaction
                console.log('unshift:', newWord, [...state.words]);
            };

            const popHandler = () => {
                debugger;
                // update state
                state.words.pop();
                // render state
                const wordsComponent = wordsList(state.words);
                // update UI
                const wordsContainer = document.getElementById('all-words');
                wordsContainer.innerHTML = '';
                wordsContainer.appendChild(wordsComponent);
                // log interaction
                console.log('pop:', [...state.words]);
            };

            const shiftHandler = () => {
                debugger;
                // update state
                state.words.shift();
                // render state
                const wordsComponent = wordsList(state.words);
                // update UI
                const wordsContainer = document.getElementById('all-words');
                wordsContainer.innerHTML = '';
                wordsContainer.appendChild(wordsComponent);
                // log interaction
                console.log('shift:', [...state.words]);
            };

            // 3. write handler for resetting
            const resetHandler = () => {
                // clear state
                while (state.words.length !== 0) {
                    state.words.pop();
                }
                // reset UI
                document.getElementById('all-words').innerHTML = '';
                document.getElementById('word').value = '';
                // log interaction
                console.log('reset:', [...state.words]);
            };
        </script>

        <script id="listeners">
            document
                .getElementById('push-button')
                .addEventListener('click', pushWordHandler);
            document
                .getElementById('unshift-button')
                .addEventListener('click', unshiftWordHandler);
            document
                .getElementById('pop-button')
                .addEventListener('click', popHandler);
            document
                .getElementById('shift-button')
                .addEventListener('click', shiftHandler);

            // 2. add event listener for handling
            document
                .getElementById('reset-button')
                .addEventListener('click', resetHandler);
        </script>
    </body>
</html>
